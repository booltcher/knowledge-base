---
outline: [2, 3]
tags: Concept
publishDate: 2023/12/06
---

# MVVM、MVP和MVC

## Web1.0时期

MVC架构主要是相对于后端开发来说的，因为前端的职责过于简单，只工作于MVC中的V(iew)层。往往是前端编写HTML文件，加上一些简单的交互，因为没有数据所以是纯静态页面，之后交给后端，后端使用模板语法进行一些动态化改造，最后才能得到动态页面。

- 前端页面开发效率不高（前端被称为切图仔）
- 前后端职责不清

架构图如下：

![Web1.0](/src/assets/mvvm-web1.png)

## Web2.0时期

微软的IE浏览器引入了`XMLHttpRequest`对象。

基于`XMLHttpRequest`，谷歌的工程师对其进行封装，并提出了“Ajax”术语并将其用于描述一组在网页中使用的现有技术的组合。2005年，Google推出了基于Ajax的产品，如Google Maps和Gmail。

Ajax是异步数据交互的技术，异步通信能够在不重载整个页面的情况下与服务器进行数据交换，这使得网页能够更快的响应用户的操作并且能够在后台处理数据和与服务器进行交互，这种异步通信的方式极大的提高了网页的性能和用户体验。

随后，Ajax技术开始风靡全球。

有了Ajax之后，前后端的职责划分也更加清晰，可以实现前后端分离。因为前端可以通过Ajax与后端进行数据交互，这时才开始有独立的前端工程师岗位，同时前端的类库开始慢慢发展，最著名的就是JQuery了。

所以架构图如下：

![Web2.0](/src/assets/mvvm-web2.png)

这时依旧存在问题：

缺乏可行的开发模式承载更复杂的业务需求，页面内容都杂糅在一起，一旦应用规模增
大，就会导致难以维护了。因此，前端的MVC也随之而来。

## MVVM框架三要素

- 响应式 - Vue如何监听数据变化
- 模板引擎 - Vue的模板如何编写和解析
- 渲染 - Vue如何将模板转化为HTML

## MVVM和MVC的差别

**MVC的特点：**

- View UI布局，展示数据
- Model 管理数据
- Controller 响应用户操作，并将 Model 更新到 View 上

**MVC的优点：**责任分离

**MVC的痛点：**

1. 开发者在代码中大量调用相同的 DOM API, 处理繁琐 ，操作冗余，使得代码难以维护。
2. 大量的DOM 操作使页面渲染性能降低，加载速度变慢，影响用户体验。
3. 当 Model 频繁发生变化，开发者需要主动更新到View ；当用户的操作导致 Model 发生变化，开发者同样需要将变化的数据同步到Model 中， 这样的工作不仅繁琐，而且很难维护复杂多变的数据状态。

### **MVVM 的出现，完美解决了以上三个问题**

MVVM 由 Model，View，ViewModel 三部分构成，Model 层代表数据模型，也可以在Model中定义数据修改和操作的业务逻辑；View 代表UI 组件，它负责将数据模型转化成UI 展现出来，ViewModel 是一个同步View 和 Model的对象。

在MVVM架构下，View 和 Model 之间并没有直接的联系，而是通过ViewModel进行交互，Model 和 ViewModel 之间的交互是双向的， 因此View 数据的变化会同步到Model中，而Model 数据的变化也会立即反应到View 上。

ViewModel 通过**双向数据绑定**把 View 层和 Model 层连接了起来，而View 和 Model 之间的同步工作完全是**自动**的，无需人为干涉，因此开发者只**需关注业务逻辑**，**不需要手动操作DOM**, 不需要关注数据状态的同步问题，复杂的数据状态维护完全由 MVVM 来统一管理。

## 总结

这三者都是框架模式，它们设计的目标都是为了解决Model和View的耦合问题。

- MVC模式出现较早主要应用在后端，如Spring MVC、 ASP.NET MVC等，在前端领域的早期也有应用，如Backbone.js。它的优点是分层清晰，缺点是数据流混乱，灵活性带来的维护性问题。
- MVP模式在是MVC的进化形式，Presenter作为中间层负责MV通信，解决了两者耦合问题，但P层过于臃肿会导致维护问题。
- MVVM模式在前端领域有广泛应用，它不仅解决MV耦合问题，还同时解决了维护两者映射关系的大量繁杂代码和DOM操作代码，在提高开发效率、可读性同时还保持了优越的性能表现。