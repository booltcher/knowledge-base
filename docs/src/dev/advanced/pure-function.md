---
outline: [2, 3]
tags: 
	- 概念
publishDate: 2021/8/25
---


# 纯函数与副作用

## 什么是纯函数

- 相同的输入永远得到相同的输出
- 无副作用

::: info
其实在八年级的时候我们就学到了以数学的角度理解函数的概念：一个输入只有一个输出，而多个输入产生的输出可能相同。**所以函数其实本就该是输入和输出的映射关系**。**纯函数就是数学角度的函数**，而同时也是函数式编程的全部。
:::

比如： `slice` 和 `splice`

这两个函数的作用并无二致——但是注意，它们各自的方式却大不同，但不管怎么说作用还是一样的。

我们说 `slice` 符合**纯函数**的定义是因为对相同的输入它保证能返回相同的输出。

而 `splice` 却会嚼烂调用它的那个数组，然后再吐出来；这就会**产生可观察到的副作用**，即这个数组永久地改变了。

## 副作用

可能是调用了DOM API、I/O操作、控制台打印消息等都是副作用。

如以下这个函数，虽然相同的输入得到相同的输出，但是在过程中修改了document的title，所以它产生了外部可观察的变化——副作用，即它不是一个纯函数。

```jsx
function calc(x) {
	document.title = x;
	return 2x + 1;
}
```

## `useEffect`和`useCallback`

思考：是否可以从新的角度去理解这两个hooks，前者是有副作用的的函数，后者是无副作用的函数？