---
outline: [2, 3]

# customized frontmatter
tags: Tools Vim
publishDate: 2023/02/24
---
# Vim（一） 基础与普通模式

## 模式

- 普通模式 Normal
- 插入模式 Insert
- 可视模式 Visual
- 命令模式 : 可在命令行中执行外部的命令

## 模式互转
- Normal -> Insert: 小写以字符为单位，大写以行为单位
  - i 光标前插入
  - I 行首插入
  - a 光标后插入
  - A 行尾插入
  - o 下一行插入
  - O 上一行插入
  - s 删除当前字符并进入插入模式
  - S 删除当前行并进入插入模式
- Insert -> Normal: esc / jj / ctrl [
- Normal -> Visual: v
  - gv 重复上次的选择区域
- Normal -> Command: 输入冒号

## 普通模式下的操作
### 文本对象

| 符号             | 含义                                         |
| ---------------- | -------------------------------------------- |
| w(ord)           | 单词                                         |
| l(etter)         | 字母                                         |
| t(ag)            | 标签                                         |
| b(racket)        | 小括号                                       |
| B                | 大括号                                       |
| s(entence)       | 句子(直到句号叹号问号)                       |
| p(aragragh)      | 段落                                         |
| [ 或者 ]         | 代码段 或 中括号                             |
| %                | 到另一半括号                                 |
| 反引号或 ' 或 "  | 引号                                         |
| a                | 参数                                         |
| ii/ iI / aI / ai | 基于缩进的函数体(基于插件 vim-indent-object) |

### 范围介词

#### `t`

`till/to` 表示直到，不包含目标字符

#### `i`

`in` 表示不包括边界

#### `a`

`around`表示包括边界，以及边界的符号

> 常见用法 🌰
> iw aw it at ip ap ib ab f{char} t{char}
>
> - df{char} 从当前位置删除到 char
> - dt{char} 从当前位置删除到 char

### 光标操作

| 操作符   | 含义                                        |
| -------- | ------------------------------------------- |
| ctrl + o | 返回到跳转前的位置(类似于后退)              |
| ctrl + i | 前进                                        |
| w(ord)   | 下一个单词开头，W 忽略符号                  |
| e(nd)    | 下一个单词结尾，E 忽略符号                  |
| b(egin)  | 上一个单词开头，B 忽略符号                  |
| ge       | 上一个单词结尾，gE 忽略符号                 |
| 0 或 ^   | 行首                                        |
| $        | 行尾                                        |
| gg       | 第一行                                      |
| ngg/nG   | 第 n 行                                     |
| G        | 最后一行                                    |
| f{char}  | 行内跳转到第一个匹配的字符处(向后), F(向前) |
| gh       | 鼠标悬停 VSCode 功能                        |
| gd       | 跳转到定义(cmd + 鼠标左键) VSCode 功能      |
| H        | 到屏幕的第一行                              |
| L        | 到屏幕的最后一行                            |
| M        | 到屏幕的中间一行                            |
| gb       | 高亮光标所在单词，多光标操作                |

### 查找

为了避免多次重复操作，建议查找大写字母或标点来精准跳转。

#### f(ind)

- f 查找下一个字符
- F 查找上一个字符

#### t(ill)

- t 查找下一个并跳转到之前
- T 查找上一个并跳转到之后

#### `/#` 查找光标所在单词

- `` 向后查找
- `#` 向前查找
- `g*` 部分符合向下查找
- `g#` 部分符合向上查找
- 支持使用`n`继续查找

#### s(neak)

- 基于插件 sneak
- 基于两个字符
- 全文件
- 可以通过设置用 f 替代其用法

### 替换(Replace)

- r 替换当前光标所在字符
- R 进入替换模式，逐字替换

### 修改(Change)

- c 修改当前字符
- cc 修改当前行，等同于 S
- C 修改到行尾

> 数字修改：
>
> 修改当前光标所在数字，如果光标所在不是数字，则会径直跳到当前行的第一处数字处
>
> 可以前面加数值，表示这次加减的幅度，这种修改是基于进制，如果是一个 008 这样的数字，vim 默认会以为是八进制数字，如果要禁用这种识别方式，可以通过设置
>
> `set nrformats=`
>
> 使得每次都是识别为十进制数字

- ctrl + a 数字增大
- ctrl + x 数字减小

### 删除(Delete)

- d 删除当前字符
- dd 删除当前行
- dw,de 当前位置删除到单词末尾
- db 当前位置删除到单词开头
- 2dd 删除两行
- D 删除到行尾
- dG 删除到文件末尾
- dgg 向前删除到文件开始
- s 删除当前字符并进入插入模式
- S 同 cc，删除当前行并进入插入模式
- x 删除当前字符
- X 删除前一个字符

### 复制(Yank)

- y(范围) 复制
- yy 复制当前行

### 粘贴(Paste)

- p 粘贴到光标位置
- P 粘贴到光标位置以前
- ddp 交换当前行与上一行
- xp 交换光标所在字符与下一个字符

### 大小写(Uppercase)

- ~ 反转当前字符大小写
- g~~ 反转当前行大小写
- gu 转为小写，可跟范围 guaw
- gU 转为大写，可跟范围，gUU 表示将当前行转为大写

### 撤销(Undo)

> 每一次使用 ESC 会将本次修改封装为块，撤销会以块为单位。如果在插入模式下使用了额方向键，则会产生一个新的撤销块。

- u 撤销一次
- 2u 撤销两次
- U 撤销当前行的所有修改
- ctrl+ r redo 撤销 undo

### 重复操作

#### `.`

重复上次操作：不包含光标移动操作，包含了模式互转的动作

> 如果现在一个需求，要往每行末尾添加分号，可以使用 A;来对第一行操作，然后 j. 就可以重复。
>
> 但是如果要修改的行数很多，可以使用 :normal 命令 ， vscode 中尚未实现。

#### `;`

重复上次寻找(对于 f/F)

#### `,`

反向执行上次寻找

### 保存

shift + zz 保存并关闭当前文件

### 缩进

- `>>` 整行向右
- `<<` 整行向左
- `>a{` {}里的内容进行缩进

### 格式化

- `==` 对光标所在行格式化缩进，也可以后跟行号
- `gg=G` 全部格式化缩进
- `=a{` 格式化对齐{}里的内容

### 选择

- v 进入字符选择模式
- `vaw` 选中单词
- shift + v 进入行选择模式
- ctrl + v 进入区域选择模式 可用于删除整列 (不生效？？？)
- 全部复制 `ggyG`
- 全选 `ggvG`

### 帮助

- F1 自己预设的帮助文档

### 标记

- `ma` 标记当前位置为 a
- ``a` 跳转到 a
- `'a` 跳转到 a 所在行
- `mM` 可以跨文件

### 翻屏

- ctrl + F 屏幕向下滚动一屏
- ctrl + B 屏幕向上滚动一屏
- ctrl + E 向下滚动一行
- ctrl + Y 向上滚动一行
- ctrl + D 向下滚动半屏
- ctrl + U 向上滚动半屏
- zz 使得当前行出于屏幕中间

### 分屏

- ctrl + w v 左右分屏
- ctrl + w s 上下分屏
- ctrl + w hjkl 在分屏之间跳转
- ctrl + w w 在两个窗口之间互换
- ctrl + w o 关闭其他窗口

### 折叠

- zM 折叠全部
- zR 打开全部折叠
- zc 折叠当前
- zo 打开当前折叠



